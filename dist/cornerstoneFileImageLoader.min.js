/*! cornerstone-file-image-loader - v0.5.1 - 2016-06-01 | (c) 2015 Chris Hafey | https://github.com/chafey/cornerstoneFileImageLoader */
var cornerstoneFileImageLoader=function(a,b,c){"use strict";function d(b){var c=cornerstoneWADOImageLoader.parseImageId(b),d=a.Deferred(),e=c.url,f=e.substring(2);if(void 0===f)return d.reject("unknown file path "+e),d;var g=new FileReader;g.onload=function(a){var e=a.target.result,f=new Uint8Array(e),g=dicomParser.parseDicom(f),h=cornerstoneWADOImageLoader.createImageObject(g,b,c.frame);h.then(function(a){d.resolve(a)},function(a){d.reject(a)})};var h=new XMLHttpRequest;h.onreadystatechange=function(){if(4===h.readyState){if(200!==h.status)return console.log("failed: "+f),d.reject('failed accessing local file "'+f+'". ('+h.status+")"),d;console.log("success: "+f);var a=h.response;g.readAsArrayBuffer(a)}};var i=h.open("GET",f,!0);return h.responseType="blob",h.request=i,h.send(),d.promise()}return void 0===c&&(c={}),b.registerImageLoader("localfile",d),c}($,cornerstone,cornerstoneFileImageLoader);
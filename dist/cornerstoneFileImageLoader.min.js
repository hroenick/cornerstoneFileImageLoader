/*! cornerstone-file-image-loader - v0.5.1 - 2016-05-30 | (c) 2015 Chris Hafey | https://github.com/chafey/cornerstoneFileImageLoader */
var cornerstoneFileImageLoader=function(a,b,c){"use strict";function d(a){return"RGB"===a||"PALETTE COLOR"===a||"YBR_FULL"===a||"YBR_FULL_422"===a||"YBR_PARTIAL_422"===a||"YBR_PARTIAL_420"===a||"YBR_RCT"===a}function e(a,b,c){void 0===c&&(c=0);var e=a.string("x00280004"),f=d(e);return f===!1?cornerstoneWADOImageLoader.makeGrayscaleImage(b,a,a.byteArray,e,c):cornerstoneWADOImageLoader.makeColorImage(b,a,a.byteArray,e,c)}function f(b){var c=a.Deferred(),d=b;d=d.substring(12);var f,h=d.indexOf("frame=");if(-1!==h){var i=d.substr(h+6);f=parseInt(i),d=d.substr(0,h-1)}if(void 0!==f&&g.hasOwnProperty(d)){var j=g[d],k=e(j,b,f);return k.then(function(a){c.resolve(a)},function(){c.reject()}),c}var l=d;if(void 0===l)return c.reject("unknown file path "+d),c;var m=new FileReader;m.onload=function(a){var h=a.target.result,i=new Uint8Array(h),j=dicomParser.parseDicom(i);void 0!==f&&(g[d]=j);var k=e(j,b,f);k.then(function(a){c.resolve(a)},function(){c.reject()})};var n=new XMLHttpRequest;return n.onreadystatechange=function(){if(200!==n.status||4!==n.readyState)return c.reject('failed accessing local file "'+l+'". ('+n.status+")"),c;var a=n.response;m.readAsArrayBuffer(a)},n.open("GET",l,!1),n.resposeType="arraybuffer",n.send(),c}void 0===c&&(c={});var g={};return b.registerImageLoader("dicomfile",f),c}($,cornerstone,cornerstoneFileImageLoader),cornerstoneFileImageLoader=function(a){"use strict";function b(a){var b=e.push(a);return b-1}function c(a){return e[a]}function d(){e=[]}void 0===a&&(a={});var e=[];return a.addFile=b,a.getFile=c,a.purge=d,a}(cornerstoneFileImageLoader);